#include <iostream>
#include <unordered_map>
using namespace std;

struct Node {
    int data;
    Node *left, *right;
    Node(int x) : data(x), left(NULL), right(NULL) {}
};

Node* build(vector<int>& pre, int ps, int pe,
            vector<int>& in, int is, int ie,
            unordered_map<int,int>& mp) {

    if(ps > pe || is > ie) return NULL;

    Node* root = new Node(pre[ps]);
    int idx = mp[root->data];
    int leftSize = idx - is;

    root->left = build(pre, ps+1, ps+leftSize,
                       in, is, idx-1, mp);

    root->right = build(pre, ps+leftSize+1, pe,
                        in, idx+1, ie, mp);

    return root;
}

int main() {
    vector<int> preorder = {3, 9, 20, 15, 7};
    vector<int> inorder  = {9, 3, 15, 20, 7};

    unordered_map<int,int> mp;
    for(int i = 0; i < inorder.size(); i++)
        mp[inorder[i]] = i;

    Node* root = build(preorder, 0, preorder.size()-1,
                       inorder, 0, inorder.size()-1, mp);

    cout << "Tree constructed!";
    return 0;
}
